<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">

  <link rel="icon" href="" type="image/png" sizes="16x16"/>
  <link rel="canonical" href="samuuuh.github.io/resumos/FSI/1.%20Web/1-web" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Segurança Web - ModeloProtocolo HTTPDescriçãoCriado em 1989, permite a um cliente aceder a recursos armazenados numservidor.">
  <meta property="og:site_name" content="Knowledge Tree">

  <link rel="stylesheet" href="/knowledge-tree/assets/css/main.css">

  
  <meta property="og:description" content="Segurança Web - ModeloProtocolo HTTPDescriçãoCriado em 1989, permite a um cliente aceder a recursos armazenados numservidor."/>
  

  
  <meta property="og:title" content="Segurança Web">
  <meta property="og:type" content="article">
  

  
  <meta property="article:published_time" content="2022-02-19T13:44:00+00:00">
  <meta property="article:author" content="samuuuh.github.io/">
  

  <meta property="og:url" content="samuuuh.github.io/resumos/FSI/1.%20Web/1-web" />

  

  <title>
    
      Segurança Web &mdash; Knowledge Tree
    
  </title>
</head>

  
  <body>
    <nav>
    <div>
        <a class="header-title" href="/knowledge-tree/"><b>Knowledge Tree</b></a>
        <a class="header-link" href="/knowledge-tree/about">About</a>
        <a class="header-link" href="https://github.com/Samuuuh/knowledge-tree">Github</a>
    </div>
</nav>


    <main class="main-content">
      <article>
  <div>
    <h1>Segurança Web</h1>
    <time datetime="2022-02-19T13:43:06+00:00">
      Last updated on February 19, 2022
      
    </time>
  </div>

  <div id="notes-entry-container">
    <content>
      <h1 id="segurança-web---modelo">Segurança Web - Modelo</h1>
<h2 id="protocolo-http">Protocolo HTTP</h2>
<h4 id="descrição">Descrição</h4>
<p>Criado em 1989, permite a um cliente aceder a recursos armazenados num<br />
servidor.</p>

<p>São identificados por <strong>Uniform Resource Location</strong> (URL):<br />
• Esquema (http, https, etc.) 
• Domínio (aaa.bbb.cc)
• Caminho para o recurso (path)<br />
• Informação extra (e.g., informação de query ou identificador de fragmento)</p>

<h4 id="comunicação">Comunicação</h4>
<p>• <strong>GET</strong>: Obter recurso numa URL específica<br />
• <strong>POST</strong>: Cria um novo recurso numa URL específica<br />
• <strong>PUT</strong>: Substitui representação de recurso existente com outro conteúdo<br />
• <strong>PATCH</strong>: Altera parte de um recurso<br />
• <strong>DELETE</strong>: Apaga recurso numa URL específica</p>

<h4 id="alterações-no-protocolo">Alterações no protocolo</h4>
<ul>
  <li>GET: Não devia alterar o estado do servidor, mas quase sempre tem side-effects</li>
  <li>POST: utilizado para quase tudo o que originalmente era previsto para PUT, PATCH e  DELETE</li>
</ul>

<p>Aplicações precisam de reconhecer pedidos relacionados. É necessário guardar o estado, através de <a class="internal-link" href="/knowledge-tree/conceitos/Web/Cookies/cookies">Cookies</a>.</p>

<p>Surgiu assim:</p>
<ul>
  <li>HTTP/2 -&gt; Pipeline de pedidos + multiplexing + server push</li>
  <li>HTTP/3 -&gt; Abandona TCP e adota QUIC da Google</li>
</ul>

<h2 id="modelo-de-execução">Modelo de Execução</h2>
<h4 id="server-side">Server Side</h4>
<p>Bases de dados, gestão de sessões, personalização, etc.</p>

<h4 id="client-side">Client Side</h4>
<p>Principalmente browsers</p>

<p>Cada janela do browser:<br />
• processa respostas HTML e executa JavaScript se necessário<br />
• efetua pedidos para sub-recursos (imagens, CSS, JavaScript, etc.)<br />
• responde a eventos do utilizador ou eventos definidos pelo próprio site</p>

<h4 id="porque-utilizar-iframes">Porque utilizar (i)frames?</h4>
<p><strong>Frame</strong>: Divisão rígida visível
<strong>iFrame</strong>: Objeto flutuante/imbricado num documento</p>

<ul>
  <li>Delegar uma área do ecrã para outra origem</li>
  <li>Aproveitar proteção do browser direcionada para isolamento de frames. Este isolamento permite a página mãe não falhar mesmo que a frame falhe.</li>
</ul>

<h2 id="modelo-de-ataque">Modelo de Ataque</h2>
<h4 id="diferentes-tipos-de-ataques">Diferentes tipos de ataques</h4>
<ul>
  <li>Atacante controla o meio de comunicação
    <ul>
      <li>Abordado em <span title="There is no note that matches this link." class="invalid-link">  <span class="invalid-link-brackets">[[</span>  21 - Segurança de Redes - Parte 1  <span class="invalid-link-brackets">]]</span></span> e <span title="There is no note that matches this link." class="invalid-link">  <span class="invalid-link-brackets">[[</span>  22 - Segurança de Redes - Parte 2  <span class="invalid-link-brackets">]]</span></span></li>
    </ul>
  </li>
  <li>Atacante controla parte da aplicação web
    <ul>
      <li>Adversário controla servidor -&gt; Impedir abuso do cliente</li>
      <li>Adversário controla cliente -&gt; Impeder abuso do servidor</li>
    </ul>
  </li>
</ul>

<h2 id="modelo-de-segurança">Modelo de Segurança</h2>
<h3 id="same-origin-policy---sop">Same Origin Policy - SOP</h3>
<p>Under the policy, a <a href="https://en.wikipedia.org/wiki/Web_browser_engine" title="Web browser engine">web browser</a> permits scripts contained in a first web page to access data in a second web page, but only if both web pages have the same <em>origin</em>. An origin is defined as a combination of <a href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier" title="Uniform Resource Identifier">URI scheme</a>, <a href="https://en.wikipedia.org/wiki/Hostname" title="Hostname">host name</a>, and <a href="https://en.wikipedia.org/wiki/Port_(computer_networking)" title="Port (computer networking)">port number</a>. This policy prevents a malicious script on one page from obtaining access to sensitive data on another web page through that page’s <a href="https://en.wikipedia.org/wiki/Document_Object_Model" title="Document Object Model">Document Object Model</a>.</p>

<p>Analogia de um sistema operativo com o browser:
!<span title="There is no note that matches this link." class="invalid-link">  <span class="invalid-link-brackets">[[</span>  web-model-compare.png  <span class="invalid-link-brackets">]]</span></span></p>

<h4 id="características-do-sop">Características do sop</h4>
<p><strong>Confidencialidade</strong>: Dados de uma origem não podem ser acedidos por código de origem diferente.
<strong>Integridade</strong>: Dados de uma origem não podem ser alterados por código com uma origem diferente.</p>

<p><strong>Origem</strong>:  <code class="language-plaintext highlighter-rouge">host</code>, <code class="language-plaintext highlighter-rouge">protocol</code>, <code class="language-plaintext highlighter-rouge">port</code></p>

<p>Código numa frame só pode aceder a dados com a mesma origem.
Mais sobre SOP: <a href="https://www.netsparker.com/whitepaper-same-origin-policy/">How to Understand SOP: Same-origin Policy Whitepaper | Netsparker</a></p>

<h4 id="pedidos-fora-do-domínio">Pedidos fora do domínio</h4>
<p>Uma página/frame pode fazer pedidos HTTP fora do seu domínio</p>
<ul>
  <li>Escrita geralmente permitida: permite enviar/expor dados a serviços</li>
  <li>Embedding de recursos de outras origens é geralmente permitido</li>
</ul>

<h4 id="resposta">Resposta</h4>
<p>Os dados contidos na resposta:</p>
<ul>
  <li>Podem ser processados nativamente pelo browser (e.g., criar frame)</li>
  <li>Não podem ser analisados programaticamente (por princípio)</li>
  <li>O embedding expõe alguma informação</li>
</ul>

<h4 id="exemplos">Exemplos</h4>
<ul>
  <li><strong>HTML</strong>
    <ul>
      <li>Não podemos analisar o código programaticamente</li>
      <li>Podemos criar frames.</li>
      <li>Exemplo:
        <ul>
          <li>Imagens: não podemos ver quantos pixels uma image tem, mas podemos ver o seu tamanho.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Javascript</strong>
    <ul>
      <li>Pode ser executado, mas somente no nosso contexto</li>
      <li>um código de javascript não pode alterar outro javascript de uma origem diferente. Além disso, <strong>não podemos analisar o código programaticamente</strong>.</li>
    </ul>
  </li>
  <li><strong>iframe</strong>
    <ul>
      <li>Assim como as imagens, não podemos ler o conteúdo do iframe programaticamente nem um iframe pode aceder os recursos da paǵina que está a exibir. É um sistema isolado. Melhor explicação: <a href="https://security.stackexchange.com/questions/67889/why-do-browsers-enforce-the-same-origin-security-policy-on-iframes">https://security.stackexchange.com/questions/67889/why-do-browsers-enforce-the-same-origin-security-policy-on-iframes</a></li>
    </ul>
  </li>
</ul>

<h4 id="exemplo-de-ataque-evitado">Exemplo de ataque evitado</h4>
<ol>
  <li>Podemos ser enganados a aceder um website com o seguinte url: <a href="http://www.badbank.com">www.badbank.com</a> . O website cria um <code class="language-plaintext highlighter-rouge">iframe</code> do <a href="http://www.bank.com">www.bank.com</a> . Com isto, podemos pensar que estamos no site legítmo e fazemos login no site.  Desta forma o <code class="language-plaintext highlighter-rouge">badbank</code> pode recolher nossas informações ou até mesmo enviar requests para o nosso banco.</li>
  <li>Same Origin Policy não evita apenas que possamos fazer requests a outros origens cegamente.</li>
</ol>

<p>Referência: <a href="https://www.netsparker.com/whitepaper-same-origin-policy/#WorldWithoutSameOriginPolicy">https://www.netsparker.com/whitepaper-same-origin-policy/#WorldWithoutSameOriginPolicy</a></p>

<h3 id="cross-origin-resouce-sharing---cors">Cross-Origin Resouce Sharing - CORS</h3>
<p>Assim como no <strong>SOP</strong>, podemos fazer requests para qualquer site, mas é de responsabilidade do servidor verificar se esse pedido é aceito ou não.</p>

<h4 id="pedidos-simples">Pedidos Simples</h4>
<ol>
  <li>Não causam <code class="language-plaintext highlighter-rouge">side-effects</code></li>
  <li>O browser faz pedido e verifica se o código em <strong>A</strong> pode aceder a um recurso de <strong>B</strong>.</li>
  <li>O servidor pode permitir mais casos de uso através do atributo <code class="language-plaintext highlighter-rouge">Access-Control-Allow-Origin</code>.</li>
</ol>

<h4 id="pedidos-pre-flighted">Pedidos <em>pre-flighted</em></h4>
<ol>
  <li>Podem causar <code class="language-plaintext highlighter-rouge">side-effects</code></li>
  <li>O <strong>servidor A</strong> antes de fazer o request, envia um <code class="language-plaintext highlighter-rouge">dummy request</code> ao <strong>servidor B</strong>, de modo a verificar se o código em A pode aceder a recursos provenientes de B.</li>
  <li>O servidor pode permitir mais casos de uso através do atributo <code class="language-plaintext highlighter-rouge">Access-Control-Allow-Origin</code>.</li>
</ol>

<h4 id="motivação-para-pre-flighted-requests">Motivação para <em>pre-flighted requests</em></h4>
<blockquote>
  <p>“Without the preflight request, servers could begin seeing unexpected requests from browsers. This could lead to a security issue if the servers weren’t prepared for these types of requests. The CORS preflight allows cross-domain requests to be introduced to the web in a safe manner.”</p>
</blockquote>

<blockquote>
  <p><a href="https://stackoverflow.com/questions/15381105/what-is-the-motivation-behind-the-introduction-of-preflight-cors-requests">What is the motivation behind the introduction of preflight CORS requests?</a></p>
</blockquote>

<p>Com SOP não seria possível que websites de outras origens enviassem requests apropriados a um website A (devido a falta de cookies e outros recursos para verificar a autenticidade).</p>

<p>O CORS permite o relaxamento de políticas de SOP. Vamos voltar ao exemplo do <code class="language-plaintext highlighter-rouge">[www.bank.com](&lt;http://www.bank.com&gt;)</code>. Vamos supor que <code class="language-plaintext highlighter-rouge">[www.badbank.com](&lt;http://www.badbank.com&gt;)</code> tenha políticas relaxadas de SOP com o CORS e que <code class="language-plaintext highlighter-rouge">www.bank.com</code> não implemente <code class="language-plaintext highlighter-rouge">CORS</code>. No fim, <code class="language-plaintext highlighter-rouge">www.bank.com</code>, por ser um website criado antes da existência do <code class="language-plaintext highlighter-rouge">CORS</code> não está a espera de um pedido de outro recurso, por isso o <code class="language-plaintext highlighter-rouge">www.badbank.com</code> poderia enviar um request para deletar a conta ou trasferir dinheiro.</p>

<p>Por isso, o <strong>pre-flight</strong> foi feito, para poder suportar a transição a web sem <code class="language-plaintext highlighter-rouge">CORS</code> para a web com <code class="language-plaintext highlighter-rouge">CORS</code> de maneira segura.</p>

<p>Com o <strong>pre-flight,</strong> <code class="language-plaintext highlighter-rouge">[www.badbank.com](&lt;http://www.badbank.com&gt;)</code> iria enviar um <strong>dummy request</strong> ao <code class="language-plaintext highlighter-rouge">[www.bank.com](&lt;http://www.bank.com&gt;)</code> pergutando se ele tem <code class="language-plaintext highlighter-rouge">CORS</code> implementado, se não tiver, o pedido é rejeitado. E mesmo que tivesse o <code class="language-plaintext highlighter-rouge">CORS</code> o pedido iria ser rejeitado, porque <code class="language-plaintext highlighter-rouge">www.badbank.com</code> não seria um website com permissões de acesso.</p>

<h3 id="same-origin-policy-para-cookies">Same Origin Policy para Cookies</h3>
<h4 id="origem">Origem</h4>
<p>O esquema é opcional ao contrário dos requests. É definido por:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">path</code></li>
  <li><code class="language-plaintext highlighter-rouge">domínio</code></li>
</ul>

<h4 id="public-suffix-list">Public suffix list</h4>
<p>Lista de sufixos que são comuns a quase todas a páginas como: <code class="language-plaintext highlighter-rouge">.com</code> , <code class="language-plaintext highlighter-rouge">.edu</code>, …</p>

<h4 id="enviar-cookies">Enviar cookies</h4>
<p>Os browsers enviavam todas as cookies no contexto de uma URL:</p>
<ul>
  <li>A path da cookie tiver o domínio for um prefixo da path da url</li>
  <li>A path da cookie for um prefixo da path da URL</li>
</ul>

<p>!<span title="There is no note that matches this link." class="invalid-link">  <span class="invalid-link-brackets">[[</span>  web-model-cookies.png  <span class="invalid-link-brackets">]]</span></span></p>

<p>Os browsers possuem opções a dizer para quem devem enviar a cookie:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">SameSite=Strict</code>
    <ul>
      <li>Envia cookies apenas para websites com a <strong>mesma origem que a top level frame</strong>. Portanto, o browser não iria enviar cookies do <code class="language-plaintext highlighter-rouge">[www.bank.com](&lt;http://www.bank.com&gt;)</code> para o <code class="language-plaintext highlighter-rouge">[www.badbank.com](&lt;http://www.badbank.com&gt;)</code>, já que ambos possuem top level frames diferentes.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">SameSite=Lax</code>
    <ul>
      <li>Distingue alguns pedidos (e.g., links explícitos) e abre exceções cross domain para o envio de cookies. Por exemplo, javascript que execute dentro da página de um banco (e.g google analytics) poderia aceder as cookies do cliente usado <code class="language-plaintext highlighter-rouge">document.cookie</code> (session Hijacking). Mas podemos evitar isto adicionando <code class="language-plaintext highlighter-rouge">HTTPOnly</code> ao cookie.</li>
    </ul>
  </li>
</ul>

<p>O SOP de cookies (usando path) dá um controlo mais fino do que o SOP de DOM?<br />
	• Não! Na realidade o acesso em regime DOM existe sempre. E.g. se mesmo domínio mas path diferente, então são acessíveis via DOM.</p>

<h1 id="segurança-web---ataques">Segurança Web - Ataques</h1>
<h2 id="cross-site-request-forgery">Cross-Site Request Forgery</h2>
<h3 id="simple-attack">Simple Attack</h3>
<p>Quem possui o cookie, consegue fazer pedidos.
O atacante pode simplesmente requisitar um cookie de um website comprometido, ouvir a rede (e.g netcat) e conseguir o cookie.</p>

<p>Com <strong>SOP</strong> e <strong>CORS</strong> o cookie só deve ser enviado a websites que possuem a mesma origem ou que foram autorizados.</p>

<p>Ainda há outros riscos, pelo que alguem pode tentar visualizar o cookie por meio de javascript. Um meio de dificultar a obtenção do cookie é demarcar o cookie como <code class="language-plaintext highlighter-rouge">HTTPOnly</code>.
No entanto, ao pedir um recurso que causa uma ação no servidor, o atacante não pode ver o recurso a partir de JavaScript, mas o side-effect foi executado:
<code class="language-plaintext highlighter-rouge">&lt;img src=“https://bank.ch/transfer?amt=$1B&amp;to=evil“&lt;/img&gt;</code></p>

<table>
  <tbody>
    <tr>
      <td>[What Is Cross-Site Request Forgery (CSRF) and How Does It Work?</td>
      <td>Synopsys](https://www.synopsys.com/glossary/what-is-csrf.html)</td>
    </tr>
  </tbody>
</table>

<h3 id="outras-medidas">Outras medidas</h3>
<ul>
  <li>Mecanismo que permita garantir ao servidor que pedido vem de página confiável</li>
  <li>Usar <code class="language-plaintext highlighter-rouge">SameSite=Strict</code></li>
  <li>Impedir login: token secreto da sessão</li>
  <li>Defesa em profundidade
    <ul>
      <li>Validação explicita no servidor de atributos <code class="language-plaintext highlighter-rouge">Referer</code> e <code class="language-plaintext highlighter-rouge">Origin</code></li>
      <li>Forçar CORS com pre-flight</li>
    </ul>
  </li>
</ul>

<h2 id="sql-injection">SQL Injection</h2>
<p>SQL injection segue o mesmo princípio fornecido por input injection: o input do utilizador pode ser malicioso.</p>

<h3 id="medidas">Medidas</h3>
<ul>
  <li>Nunca criar comandos SQL dinâmicamente</li>
  <li>Usar <strong>comandos parametrizados</strong> como: <code class="language-plaintext highlighter-rouge">INSERT INTO products (name, price) VALUES (?, ?);</code> .</li>
</ul>

<p>A parameterized query (also known as a <em>prepared statement</em>) is a means of pre-compiling a SQL statement so that all you need to supply are the “parameters” (think “variables”) that need to be inserted into the statement for it to be executed.
Referência: <a href="https://stackoverflow.com/questions/4712037/what-is-parameterized-query">What is parameterized query?</a></p>

<p>Ao pré compilarmos as queries evitamos as queries de serem modificadas, por isso não é sujeita SQL injection attacks.</p>
<ul>
  <li><strong>Bibliotecas ORM</strong>: estas bibliotecas oferecem uma mecanismos de abstração da base de dados de inputs, mas também não podemos confiar completamentamente nas bibliotecas ORM. Algumas falhas podem acontecer.</li>
</ul>

<h2 id="cross-site-scripting-xss">Cross Site Scripting (XSS)</h2>
<p>Outro exemplo de injeção de código, mas do lado o cliente. O ataque consiste em alojar um script malicioso.</p>

<ul>
  <li><strong>Reflected XSS</strong>: o atacante faz um pedido a um site legítimo e a payload maliciosa é “refletida” para executar na máquina do cliente</li>
  <li><strong>Stored XSS</strong>: o atacante conseguiu armazenar a payload maliciosa num recurso armazenado no site legítimo, e.g., numa entrada da BD</li>
</ul>

<h3 id="histórias">Histórias</h3>
<h4 id="paypal">Paypal</h4>
<p>Um exemplo foi o PayPal XSS em 2006. Basicamente os atacantes enviavam um email a vítima afirmando que a conta deles tinha sido comprometida. No fim pediam para o usuário entrar num link hosted pelo próprio website e que depois era redirecionado para outro. Depois eles pediam uma serie de dados, sendo que o link parecia ser legítimo.</p>

<h4 id="samyworm">SamyWorm</h4>
<p>Era uma rede social em que quando a pessoa visualizava o perfil do samy ele basicamente virava amigo dele.</p>

<h3 id="prevenção">Prevenção</h3>
<h4 id="validate-inputrequests">Validate Input/Requests</h4>
<p>• Validar todos os headers, cookies, queries de pesquisa, campos de formulários, campos escondidos.
• Testar a presença de strings “perigosas”<br />
• Muito difícil de garantir completude e actualidade: black listing.
• Existem inúmeras formas de disfarçar código malicioso, usando codificações criativas.
• As frameworks de desenvolvimento Web mais populares fornecem mecanismos de filtragem elaborados -&gt; ainda imperfeitos</p>

<h4 id="content-security-policy">Content Security Policy</h4>
<ul>
  <li>Scripts inline não são executados</li>
  <li>Executar scripts provindos apenas de sites autorizados (white-list)</li>
  <li>frame-ancestor ‘none’: um website não pode ser framed por outro, evitando ataques de click-jacking.</li>
</ul>

<h4 id="subresource-integrity">Subresource Integrity</h4>
<p>Ainda é possível que a white-list seja comprometida! Para evitar isto podemos adicionar uma hash de <code class="language-plaintext highlighter-rouge">integrity</code> na nossa white-list. Dessa forma se a white-list for comprometida a hash é perdida e o script não é aceito.</p>

    </content>

    <side style="font-size: 0.9em">
      <div class="notes">
        <h3 style="margin-bottom: 1em">Notes mentioning this note</h3>
        
        <div style="display: grid; grid-gap: 1em; grid-template-columns: repeat(1fr);">
        
          <div class="backlink-box">
          <a class="internal-link" href="/knowledge-tree/resumos/FSI/FSI/fsi">Fundamentos de Segurança Informática</a><br>
          <div style="font-size: 0.9em">Resumos da cadeira</div>
          </div>
        
        </div>
        
      </div>
      <div class="graph-viz">
        <h3 style="margin-bottom: 1em">Graph Visualization</h3>
        <style>
  .links line {
    stroke: #ccc;
    opacity: 0.5;
  }

  .nodes circle {
    cursor: pointer;
    fill: #8b88e6;
    transition: all 0.15s ease-out;
  }

  .text text {
    cursor: pointer;
    fill: #333;
    text-shadow: -1px -1px 0 #fafafabb, 1px -1px 0 #fafafabb, -1px 1px 0 #fafafabb, 1px 1px 0 #fafafabb;
  }

  .nodes [active],
  .text [active] {
    cursor: pointer;
    fill: black;
  }

  .inactive {
    opacity: 0.1;
    transition: all 0.15s ease-out;
  }

  #graph-wrapper {
    background: #fcfcfc;
    border-radius: 4px;
    height: auto;
  }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"
  integrity="sha512-FHsFVKQ/T1KWJDGSbrUhTJyS1ph3eRrxI228ND0EGaEp6v4a/vGwPWd3Dtd/+9cI7ccofZvl/wulICEurHN1pg=="
  crossorigin="anonymous"></script>

<div id="graph-wrapper">
  <script>
    const MINIMAL_NODE_SIZE = 8;
    const MAX_NODE_SIZE = 12;
    const ACTIVE_RADIUS_FACTOR = 1.5;
    const STROKE = 1;
    const FONT_SIZE = 16;
    const TICKS = 200;
    const FONT_BASELINE = 40;
    const MAX_LABEL_LENGTH = 50;

    const graphData = {"edges":[{"source":"503179796958532336743230207621597515898","target":"1422108377848304020"},{"source":"100072086790617209837265","target":"38041"},{"source":"103841823815487875","target":"27613844020"},{"source":"240589227765099673052794226274910629357","target":"2402776049557"},{"source":"240589227765099673052794226274910629357","target":"81676889533246026119639"},{"source":"240589227765099673052794226274910629357","target":"105853271995781485577129644"},{"source":"240589227765099673052794226274910629357","target":"18206486889979855229696720616166476532701018412"},{"source":"240589227765099673052794226274910629357","target":"19548904114439035294623638491398769279229399"},{"source":"240589227765099673052794226274910629357","target":"7853092808745256997741119377796504708"},{"source":"240589227765099673052794226274910629357","target":"2782927863386519"},{"source":"240589227765099673052794226274910629357","target":"7850043983027514073448502100"},{"source":"240589227765099673052794226274910629357","target":"3241122110819881232318764"},{"source":"240589227765099673052794226274910629357","target":"5495051139013699250083799"},{"source":"240589227765099673052794226274910629357","target":"65443548425971875856684"},{"source":"240589227765099673052794226274910629357","target":"6421157057681797349145782253"},{"source":"46378530244815725","target":"240589227765099673052794226274910629357"},{"source":"774714518649319842117578546054867522169132704794","target":"103841823815487875"},{"source":"774714518649319842117578546054867522169132704794","target":"1680077656773453826"},{"source":"774714518649319842117578546054867522169132704794","target":"447698746565831359475675571306886394"},{"source":"774714518649319842117578546054867522169132704794","target":"1851849395087745244631"},{"source":"774714518649319842117578546054867522169132704794","target":"174414388749633151336036"},{"source":"774714518649319842117578546054867522169132704794","target":"3896682460950866925"},{"source":"46378530244815725","target":"774714518649319842117578546054867522169132704794"},{"source":"774714518649319842117578546054867522169132704794","target":"71684638065172"},{"source":"46378530244815725","target":"1632202199179734376687545757396595518803233444679072"},{"source":"50183515407140165401415593961866212395148222461086","target":"297117087099758275271869396"},{"source":"50183515407140165401415593961866212395148222461086","target":"143768490085477247"},{"source":"50183515407140165401415593961866212395148222461086","target":"2119742351888060458029509408534670102650"},{"source":"50183515407140165401415593961866212395148222461086","target":"49670930463710165929681420635052"},{"source":"50183515407140165401415593961866212395148222461086","target":"8377370676197544955211194395789671980339971808048"},{"source":"50183515407140165401415593961866212395148222461086","target":"5500055021409855647479244329548649272482"},{"source":"50183515407140165401415593961866212395148222461086","target":"133540821863415617892879786549633158"},{"source":"50183515407140165401415593961866212395148222461086","target":"1516445552606797852005007732405178305066454090157728370000968386"},{"source":"46378530244815725","target":"50183515407140165401415593961866212395148222461086"}],"nodes":[{"id":"93602086757531175064909553","path":"/knowledge-tree/conceitos/Algorithms/Breath%20First%20Search/breath-first-search","label":"Breath first search"},{"id":"2964338397953191999125233","path":"/knowledge-tree/conceitos/Algorithms/Depth%20First%20Search/depth-first-search","label":"Depth first search"},{"id":"63022295962788201453","path":"/knowledge-tree/conceitos/Databases/Data%20Retrieval/data-retrieval","label":"Data retrieval"},{"id":"6925473830595409991896469767149","path":"/knowledge-tree/conceitos/Databases/Information%20Retrieval/information-retrieval","label":"Information retrieval"},{"id":"39788157","path":"/knowledge-tree/conceitos/Databases/NoSQL/nosql","label":"Nosql"},{"id":"37245","path":"/knowledge-tree/conceitos/Databases/SQL/sql","label":"Sql"},{"id":"1422108377848304020","path":"/knowledge-tree/conceitos/Networks/Asynchronous/asynchronous","label":"Asynchronous"},{"id":"33773422613162","path":"/knowledge-tree/conceitos/Networks/Byzantine/byzantine","label":"Byzantine"},{"id":"1248953862480574","path":"/knowledge-tree/conceitos/Networks/CAP%20Theorem/cap-theorem","label":"Cap theorem"},{"id":"595361","path":"/knowledge-tree/conceitos/Networks/CRDT/crdt","label":"Crdt"},{"id":"20980633","path":"/knowledge-tree/conceitos/Networks/Chord/chord","label":"Chord"},{"id":"180758507946934573733853352570660","path":"/knowledge-tree/conceitos/Networks/Distributed%20Hash%20Tables/distributed-hash-tables","label":"Distributed hash tables"},{"id":"196617406559747521982777238352564","path":"/knowledge-tree/conceitos/Networks/Epidemic%20Broadcat%20Trees/epidemic-broadcat-trees","label":"Epidemic broadcat trees"},{"id":"118364582846116905859515843","path":"/knowledge-tree/conceitos/Networks/Event-driven%20Server/event-driven-server","label":"Event Driven server"},{"id":"100072086790617209837265","path":"/knowledge-tree/conceitos/Networks/Gangster%20Paradox/gangster-paradox","label":"Gangster paradox"},{"id":"1305755994574","path":"/knowledge-tree/conceitos/Networks/Gnutella/gnutella","label":"Gnutella"},{"id":"28147445","path":"/knowledge-tree/conceitos/Networks/Graph/graph","label":"Graph"},{"id":"5346763475629440007514921644","path":"/knowledge-tree/conceitos/Networks/Interval%20Tree%20Clocks/interval-tree-clocks","label":"Interval tree clocks"},{"id":"1589861734498","path":"/knowledge-tree/conceitos/Networks/Kademlia/kademlia","label":"Kademlia"},{"id":"132141122442877141061782","path":"/knowledge-tree/conceitos/Networks/Linearizability/linearizability","label":"Linearizability"},{"id":"6417667107358961591817717861","path":"/knowledge-tree/conceitos/Networks/Media%20Access%20Control/media-access-control","label":"Media access control"},{"id":"23476356606711367982773281694029108615542100","path":"/knowledge-tree/conceitos/Networks/Message%20Authentication%20Code%20(MAC)/message-authentication-code-mac","label":"Message authentication code (mac)"},{"id":"503179796958532336743230207621597515898","path":"/knowledge-tree/conceitos/Networks/Message%20Oriented%20Middleware/message-oriented-middleware","label":"Message oriented middleware"},{"id":"11266535818559391234661965445002205","path":"/knowledge-tree/conceitos/Networks/Network%20Time%20Protocol%20(NTP)/network-time-protocol-ntp","label":"Network time protocol (ntp)"},{"id":"44825854","path":"/knowledge-tree/conceitos/Networks/Qorum/qorum","label":"Qorum"},{"id":"35904","path":"/knowledge-tree/conceitos/Networks/RPC/rpc","label":"Rpc"},{"id":"136004183879632219828","path":"/knowledge-tree/conceitos/Networks/Spanning%20Trees/spanning-trees","label":"Spanning trees"},{"id":"105891339425632660","path":"/knowledge-tree/conceitos/Networks/Synchronous/synchronous","label":"Synchronous"},{"id":"38041","path":"/knowledge-tree/conceitos/Networks/TCP/tcp","label":"Tcp"},{"id":"64200629008","path":"/knowledge-tree/conceitos/Networks/Threads/threads","label":"Threads"},{"id":"39373","path":"/knowledge-tree/conceitos/Networks/UDP/udp","label":"Udp"},{"id":"4132761509213563564","path":"/knowledge-tree/conceitos/Networks/Vector%20Clocks/vector-clocks","label":"Vector clocks"},{"id":"27613844020","path":"/knowledge-tree/conceitos/Web/Cookies/cookies","label":"Cookies"},{"id":"10321053344592847707750121767318446802220","path":"/knowledge-tree/conceitos/Web/Cross-Origin%20Resource%20Sharing/cross-origin-resource-sharing","label":"Cross Origin resource sharing"},{"id":"221215993544965438794685914937440718","path":"/knowledge-tree/conceitos/Web/Cross-Site%20Request%20Forgery/cross-site-request-forgery","label":"Cross Site request forgery"},{"id":"3483726243430623321687796","path":"/knowledge-tree/conceitos/Web/Frames%20and%20iFrames/frames-and-iframes","label":"Frames and iframes"},{"id":"1397113493381","path":"/knowledge-tree/conceitos/Web/HTTP%20Auth/http-auth","label":"Http auth"},{"id":"6255301569195718647962674","path":"/knowledge-tree/conceitos/Web/Same-Origin%20Policy/same-origin-policy","label":"Same Origin policy"},{"id":"6280954365573304766971756","path":"/knowledge-tree/conceitos/Web/Session%20Hijacking/session-hijacking","label":"Session hijacking"},{"id":"43804","path":"/knowledge-tree/conceitos/Web/XSS/xss","label":"Xss"},{"id":"46378530244815725","path":"/knowledge-tree/index/index","label":"Content List"},{"id":"2402776049557","path":"/knowledge-tree/resumos/AC/1.1.%20Introdution/1-1-introdution","label":"Untitled"},{"id":"81676889533246026119639","path":"/knowledge-tree/resumos/AC/1.2.%20Data%20Preparation/1-2-data-preparation","label":"Data Preparation"},{"id":"105853271995781485577129644","path":"/knowledge-tree/resumos/AC/1.3.%20Data%20Understanding/1-3-data-understanding","label":"Data Understanding"},{"id":"391640284630317801447218589253556416661780951","path":"/knowledge-tree/resumos/AC/1.4.%20Advanced%20Topics%20-%20Data%20Preparation/1-4-advanced-topics-data-preparation","label":"Advanced Topics - Data Preparation"},{"id":"18206486889979855229696720616166476532701018412","path":"/knowledge-tree/resumos/AC/2.1.%20Descriptive%20Analytics%20+%20Clustering/2-1-descriptive-analytics-clustering","label":"Descriptive Analytics + Clustering"},{"id":"210690132241943189195520856119340","path":"/knowledge-tree/resumos/AC/2.2.%20Frequent%20Pattern%20Mining%20-%20Association%20Rules/2-2-frequent-pattern-mining-association-rules","label":"Frequent Pattern Mining"},{"id":"19548904114439035294623638491398769279229399","path":"/knowledge-tree/resumos/AC/3.1.%20Introduction%20to%20Classification/3-1-introduction-to-classification","label":"Introduction to Classification"},{"id":"7853092808745256997741119377796504708","path":"/knowledge-tree/resumos/AC/3.2.%20Classification%20Algorithms/3-2-classification-algorithms","label":"Classification ALgorithms"},{"id":"2782927863386519","path":"/knowledge-tree/resumos/AC/3.3.%20Regression/3-3-regression","label":"Regression"},{"id":"7850043983027514073448502100","path":"/knowledge-tree/resumos/AC/3.4.%20Introduction%20to%20Recommender%20Systems/3-4-introduction-to-recommender-systems","label":"Recommender Systems"},{"id":"3241122110819881232318764","path":"/knowledge-tree/resumos/AC/3.5.%20Ensemble%20Learning/3-5-ensemble-learning","label":"Ensemble Learning"},{"id":"5495051139013699250083799","path":"/knowledge-tree/resumos/AC/4.1.%20Outlier%20Detection/4-1-outlier-detection","label":"Outlier Detection"},{"id":"65443548425971875856684","path":"/knowledge-tree/resumos/AC/4.2.%20ANN%20+%20Introduction%20to%20Deep%20Learning/4-2-ann-introduction-to-deep-learning","label":"ANN + Deep Learning"},{"id":"6421157057681797349145782253","path":"/knowledge-tree/resumos/AC/4.3.%20Metalearning%20&%20AutoML/4-3-metalearning-automl","label":"Metalearning & AutoML"},{"id":"240589227765099673052794226274910629357","path":"/knowledge-tree/resumos/AC/AC/ac","label":"Aprendizagem Computacional"},{"id":"103841823815487875","path":"/knowledge-tree/resumos/FSI/1.%20Web/1-web","label":"Segurança Web"},{"id":"1680077656773453826","path":"/knowledge-tree/resumos/FSI/2.%20Criptografia/2-criptografia","label":"Criptografia"},{"id":"447698746565831359475675571306886394","path":"/knowledge-tree/resumos/FSI/3.%20PK%20Infrastructure/3-pk-infrastructure","label":"Public-Key Infrastructure"},{"id":"1851849395087745244631","path":"/knowledge-tree/resumos/FSI/4.%20Authentication/4-authentication","label":"Authentication"},{"id":"174414388749633151336036","path":"/knowledge-tree/resumos/FSI/5.%20Redes/5-redes","label":"Segurança de Redes"},{"id":"3896682460950866925","path":"/knowledge-tree/resumos/FSI/6.%20TLS/6-tls","label":"TLS and Signal"},{"id":"774714518649319842117578546054867522169132704794","path":"/knowledge-tree/resumos/FSI/FSI/fsi","label":"Fundamentos de Segurança Informática"},{"id":"71684638065172","path":"/knowledge-tree/resumos/FSI/Perguntas%20FSI/perguntas-fsi","label":"Perguntas"},{"id":"1632202199179734376687545757396595518803233444679072","path":"/knowledge-tree/resumos/PRI/PRI/pri","label":"Processamento e Recuperação de Informação"},{"id":"1385730979894442211642858409180597843489748945","path":"/knowledge-tree/resumos/SDLE/10.%20Quorum%20Consensus%20Replicated%20ADT/10-quorum-consensus-replicated-adt","label":"10. quorum consensus replicated adt"},{"id":"297117087099758275271869396","path":"/knowledge-tree/resumos/SDLE/11.%20Byzantine%20Quorums/11-byzantine-quorums","label":"11. byzantine quorums"},{"id":"2452250852148947176341154290704886726148708359198638","path":"/knowledge-tree/resumos/SDLE/12.%20Practical%20Byzantine%20Fault-Tolerance/12-practical-byzantine-fault-tolerance","label":"12. practical byzantine fault Tolerance"},{"id":"143768490085477247","path":"/knowledge-tree/resumos/SDLE/13.%20Blockchain/13-blockchain","label":"13. blockchain"},{"id":"2119742351888060458029509408534670102650","path":"/knowledge-tree/resumos/SDLE/2.%20Message%20Oriented%20Middleware/2-message-oriented-middleware","label":"2. message oriented middleware"},{"id":"49670930463710165929681420635052","path":"/knowledge-tree/resumos/SDLE/3.%20Processing%20and%20Scaling/3-processing-and-scaling","label":"3. processing and scaling"},{"id":"8377370676197544955211194395789671980339971808048","path":"/knowledge-tree/resumos/SDLE/4.%20Replication%20and%20Consistency%20Models/4-replication-and-consistency-models","label":"4. replication and consistency models"},{"id":"7856802203877937602475915419792883785110654260","path":"/knowledge-tree/resumos/SDLE/5.%20Scalable%20Distributed%20Topologies/5-scalable-distributed-topologies","label":"5. scalable distributed topologies"},{"id":"5500055021409855647479244329548649272482","path":"/knowledge-tree/resumos/SDLE/6.%20System%20Design%20for%20Large%20Scale/6-system-design-for-large-scale","label":"6. system design for large scale"},{"id":"133540821863415617892879786549633158","path":"/knowledge-tree/resumos/SDLE/7.%20Physical%20and%20Logical%20Time/7-physical-and-logical-time","label":"7. physical and logical time"},{"id":"1516445552606797852005007732405178305066454090157728370000968386","path":"/knowledge-tree/resumos/SDLE/8.%20High%20Availability%20under%20Eventual%20Consistency/8-high-availability-under-eventual-consistency","label":"8. high availability under eventual consistency"},{"id":"77564326098429129869107156","path":"/knowledge-tree/resumos/SDLE/9.%20Quorums%20Consensus/9-quorums-consensus","label":"9. quorums consensus"},{"id":"50183515407140165401415593961866212395148222461086","path":"/knowledge-tree/resumos/SDLE/SDLE/sdle","label":"Sistemas Distribuídos em Larga Escala"}]}
    let nodesData = graphData.nodes;
    let linksData = graphData.edges;

    const nodeSize = {};

    const updateNodeSize = () => {
      nodesData.forEach((el) => {
        let weight =
          3 *
          Math.sqrt(
            linksData.filter((l) => l.source.id === el.id || l.target.id === el.id)
              .length + 1
          );
        if (weight < MINIMAL_NODE_SIZE) {
          weight = MINIMAL_NODE_SIZE;
        } else if (weight > MAX_NODE_SIZE) {
          weight = MAX_NODE_SIZE;
        }
        nodeSize[el.id] = weight;
      });
    };

    const onClick = (d) => {
      window.location = d.path
    };

    const onMouseover = function (d) {
      const relatedNodesSet = new Set();
      linksData
        .filter((n) => n.target.id == d.id || n.source.id == d.id)
        .forEach((n) => {
          relatedNodesSet.add(n.target.id);
          relatedNodesSet.add(n.source.id);
        });

      node.attr("class", (node_d) => {
        if (node_d.id !== d.id && !relatedNodesSet.has(node_d.id)) {
          return "inactive";
        }
        return "";
      });

      link.attr("class", (link_d) => {
        if (link_d.source.id !== d.id && link_d.target.id !== d.id) {
          return "inactive";
        }
        return "";
      });

      link.attr("stroke-width", (link_d) => {
        if (link_d.source.id === d.id || link_d.target.id === d.id) {
          return STROKE * 4;
        }
        return STROKE;
      });
      text.attr("class", (text_d) => {
        if (text_d.id !== d.id && !relatedNodesSet.has(text_d.id)) {
          return "inactive";
        }
        return "";
      });
    };

    const onMouseout = function (d) {
      node.attr("class", "");
      link.attr("class", "");
      text.attr("class", "");
      link.attr("stroke-width", STROKE);
    };

    const sameNodes = (previous, next) => {
      if (next.length !== previous.length) {
        return false;
      }

      const map = new Map();
      for (const node of previous) {
        map.set(node.id, node.label);
      }

      for (const node of next) {
        const found = map.get(node.id);
        if (!found || found !== node.title) {
          return false;
        }
      }

      return true;
    };

    const sameEdges = (previous, next) => {
      if (next.length !== previous.length) {
        return false;
      }

      const set = new Set();
      for (const edge of previous) {
        set.add(`${edge.source.id}-${edge.target.id}`);
      }

      for (const edge of next) {
        if (!set.has(`${edge.source.id}-${edge.target.id}`)) {
          return false;
        }
      }

      return true;
    };

    const graphWrapper = document.getElementById('graph-wrapper')
    const element = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    element.setAttribute("width", graphWrapper.getBoundingClientRect().width);
    element.setAttribute("height", window.innerHeight * 0.8);
    graphWrapper.appendChild(element);

    const reportWindowSize = () => {
      element.setAttribute("width", window.innerWidth);
      element.setAttribute("height", window.innerHeight);
    };

    window.onresize = reportWindowSize;

    const svg = d3.select("svg");
    const width = Number(svg.attr("width"));
    const height = Number(svg.attr("height"));
    let zoomLevel = 1;

    const simulation = d3
      .forceSimulation(nodesData)
      .force("forceX", d3.forceX().x(width / 2))
      .force("forceY", d3.forceY().y(height / 2))
      .force("charge", d3.forceManyBody())
      .force(
        "link",
        d3
          .forceLink(linksData)
          .id((d) => d.id)
          .distance(70)
      )
      .force("center", d3.forceCenter(width / 2, height / 2))
      .force("collision", d3.forceCollide().radius(80))
      .stop();

    const g = svg.append("g");
    let link = g.append("g").attr("class", "links").selectAll(".link");
    let node = g.append("g").attr("class", "nodes").selectAll(".node");
    let text = g.append("g").attr("class", "text").selectAll(".text");

    const resize = () => {
      if (d3.event) {
        const scale = d3.event.transform;
        zoomLevel = scale.k;
        g.attr("transform", scale);
      }

      const zoomOrKeep = (value) => (zoomLevel >= 1 ? value / zoomLevel : value);

      const font = Math.max(Math.round(zoomOrKeep(FONT_SIZE)), 1);

      text.attr("font-size", (d) => font);
      text.attr("y", (d) => d.y - zoomOrKeep(FONT_BASELINE) + 8);
      link.attr("stroke-width", zoomOrKeep(STROKE));
      node.attr("r", (d) => {
        return zoomOrKeep(nodeSize[d.id]);
      });
      svg
        .selectAll("circle")
        .filter((_d, i, nodes) => d3.select(nodes[i]).attr("active"))
        .attr("r", (d) => zoomOrKeep(ACTIVE_RADIUS_FACTOR * nodeSize[d.id]));
    };

    const ticked = () => {
      node.attr("cx", (d) => d.x).attr("cy", (d) => d.y);
      text
        .attr("x", (d) => d.x)
        .attr("y", (d) => d.y - (FONT_BASELINE - nodeSize[d.id]) / zoomLevel);
      link
        .attr("x1", (d) => d.source.x)
        .attr("y1", (d) => d.source.y)
        .attr("x2", (d) => d.target.x)
        .attr("y2", (d) => d.target.y);
    };

    const restart = () => {
      updateNodeSize();
      node = node.data(nodesData, (d) => d.id);
      node.exit().remove();
      node = node
        .enter()
        .append("circle")
        .attr("r", (d) => {
          return nodeSize[d.id];
        })
        .on("click", onClick)
        .on("mouseover", onMouseover)
        .on("mouseout", onMouseout)
        .merge(node);

      link = link.data(linksData, (d) => `${d.source.id}-${d.target.id}`);
      link.exit().remove();
      link = link.enter().append("line").attr("stroke-width", STROKE).merge(link);

      text = text.data(nodesData, (d) => d.label);
      text.exit().remove();
      text = text
        .enter()
        .append("text")
        .text((d) => shorten(d.label.replace(/_*/g, ""), MAX_LABEL_LENGTH))
        .attr("font-size", `${FONT_SIZE}px`)
        .attr("text-anchor", "middle")
        .attr("alignment-baseline", "central")
        .on("click", onClick)
        .on("mouseover", onMouseover)
        .on("mouseout", onMouseout)
        .merge(text);

      node.attr("active", (d) => isCurrentPath(d.path) ? true : null);
      text.attr("active", (d) => isCurrentPath(d.path) ? true : null);

      simulation.nodes(nodesData);
      simulation.force("link").links(linksData);
      simulation.alpha(1).restart();
      simulation.stop();

      for (let i = 0; i < TICKS; i++) {
        simulation.tick();
      }

      ticked();
    };

    const zoomHandler = d3.zoom().scaleExtent([0.2, 3]).on("zoom", resize);

    zoomHandler(svg);
    restart();

    function isCurrentPath(notePath) {
      return window.location.pathname.includes(notePath)
    }

    function shorten(str, maxLen, separator = ' ') {
      if (str.length <= maxLen) return str;
      return str.substr(0, str.lastIndexOf(separator, maxLen)) + '...';
    }
  </script>
</div>

      </div>
    </side>
  </div>
</article>
    </main>

    <footer>
      <p style="text-align: center;">Wow, you just found a wild footer!</p>

    </footer>
  </body>
</html>
